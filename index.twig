<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="{{ meta.robots }}">
  <title>{% if meta.title %}{{ meta.title }} | {% endif %}{{ site_title }}</title>
  <link rel="stylesheet" href="{{ theme_url }}/style.css" type="text/css" />
</head>
<body>

<aside class="main-nav">
<nav class="menu">
  
  <!-- <p class="directory">{{ current_page.id |root}}</p> -->
  <p class="directory"><a href="{{ base_url }}">Home</a>/{{ current_page.id |root|directoryChain}}</p>

  {% set offset = 0 %}
  <ul>
    {% for page in pages|sort_by("title")%}
    {% if page.meta.shortcut %}
      <span class="shortcut-data" style="display:none;" data-shortcut='{{ page.meta.shortcut }}'>{{ page.url }}</span>
    {% endif %}
    {%if current_page.id|isIndex %}
      {% set offset = 1 %}
    {% endif %}

      {% if (is_front_page or (page.id starts with current_page.id |root)) 
      and (current_page.id|level == page.id|level-offset) %}

      <li class="menuitem {% if page.id == current_page.id %}active{% endif %}">
        <a href="{{ page.url }}" data-shortcut="{{page.meta.shortcut}}">
          {{ page.title }}
        </a>
      </li>

      {% endif %}
    {% endfor %}
  </ul>
</nav>
</aside>

<main class="main-content">
  <article class="article">
    <h1 class='main-title'><span class="section-anchor"><a href="#">#</a></span>{{ current_page.title }}</h1>
    <nav class="tocbot"></nav>
    {{ content }}
  </article>
</main>


<script src="{{ theme_url }}/tocbot.min.js"></script>
<link href="{{ theme_url }}/tocbot.min.css" rel="stylesheet">
<script>
tocbot.init({
  // 构建目录的容器
  tocSelector: '.tocbot',
  // 文章容器
  contentSelector: '.article',
  // 需要解析的标题
  headingSelector: 'h1, h2, h3, h4',
});
</script>
</body>
</html>
